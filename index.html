<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; margin:0; background:#0b0c10; color:#eaeaea}
    .wrap{max-width:720px; margin:0 auto; padding:16px}
    .card{background:#14161c; border:1px solid #222533; border-radius:16px; padding:16px; margin:12px 0}
    h1{font-size:22px; margin:0 0 6px}
    .muted{opacity:.78; font-size:13px; line-height:1.35}
    .q{font-size:18px; line-height:1.25; margin:0 0 12px}
    .btn{width:100%; text-align:left; border:1px solid #2a2f40; background:#10121a; color:#eaeaea;
         border-radius:14px; padding:12px 12px; margin:8px 0; cursor:pointer; font-size:15px; line-height:1.25}
    .btn:hover{border-color:#3a415a}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .pill{background:#1b1f2b; border:1px solid #2a2f40; border-radius:999px; padding:6px 10px; font-size:12px; opacity:.9}
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .primary{background:#2b5cff; border-color:#2b5cff}
    .primary:hover{filter:brightness(1.05)}
    .small{font-size:13px}
    a{color:#8fb3ff}
    .divider{height:1px; background:#222533; margin:14px 0}
    .hint{font-size:12px; opacity:.75; line-height:1.3}

    /* avatars */
    .avatarRow{display:flex; align-items:center; gap:12px}
    .avatar{
      width:64px; height:64px; border-radius:999px;
      border:1px solid #2a2f40;
      background:#0f1118;
      display:flex; align-items:center; justify-content:center;
      overflow:hidden; flex:0 0 64px;
      box-shadow:0 10px 25px rgba(0,0,0,.25);
    }
    .typeTag{font-size:12px; opacity:.82; margin-top:4px}

    /* toggle */
    .toggle{display:flex; align-items:center; gap:10px; margin-top:10px}
    .switch{position:relative; width:48px; height:28px; background:#1b1f2b; border:1px solid #2a2f40; border-radius:999px; cursor:pointer}
    .knob{position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:999px; background:#9aa4b2; transition:all .15s ease}
    .switch.on{background:#2b5cff; border-color:#2b5cff}
    .switch.on .knob{left:23px; background:white}
    .toggleLabel{font-size:13px; opacity:.92}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- START -->
    <div class="card" id="screen-start">
      <h1>–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?</h1>
      <div class="muted">–¢–µ—Å—Ç –Ω–∞ 35 —Å–µ–∫—É–Ω–¥. –£–∑–Ω–∞–µ—à—å —Å–µ–±—è ‚Äî –∏ —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Å—ã–ª–∞–µ—à—å –≤ —á–∞—Ç üòà</div>

      <div class="toggle">
        <div class="switch" id="toxicSwitch" role="switch" aria-checked="false"><div class="knob"></div></div>
        <div class="toggleLabel" id="toxicLabel">–†–µ–∂–∏–º —Ç–æ–∫—Å–∏–∫: OFF</div>
        <div class="pill">5 –≤–æ–ø—Ä–æ—Å–æ–≤</div>
      </div>
      <div class="hint" id="toxicExplain" style="margin-top:8px">
        OFF ‚Äî –º—è–≥–∫–æ –∏ –ø–æ-–¥–æ–±—Ä–æ–º—É. ON ‚Äî —è–∑–≤–∏—Ç–µ–ª—å–Ω–æ –∏ ‚Äú–∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —á–∞—Ç–µ‚Äù (–Ω–æ –±–µ–∑ –∂–µ—Å—Ç–∏).
      </div>

      <div class="hint" style="margin-top:8px">
        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ <b>user_id</b> –∏ <b>@username</b> (–µ—Å–ª–∏ –µ—Å—Ç—å) + —Å–æ–±—ã—Ç–∏—è (—Å—Ç–∞—Ä—Ç/—Ñ–∏–Ω–∏—à/—à—ç—Ä).
      </div>

      <div style="height:12px"></div>
      <button class="btn primary" id="startBtn" onclick="startTest()">üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>

      <div class="muted small" id="userHint" style="margin-top:10px"></div>
      <div class="muted small" id="errBox" style="margin-top:10px; white-space:pre-wrap;"></div>
    </div>

    <!-- QUIZ -->
    <div class="card" id="screen-quiz" style="display:none">
      <div class="row" style="justify-content:space-between; align-items:center">
        <div class="pill" id="progressPill">–í–æ–ø—Ä–æ—Å 1/5</div>
        <div class="pill" id="microPill">–µ—â—ë 4 –∫–ª–∏–∫–∞ –¥–æ –¥–∏–∞–≥–Ω–æ–∑–∞</div>
      </div>
      <div style="height:12px"></div>
      <div class="q" id="qText"></div>
      <div id="answers"></div>
    </div>

    <!-- ACCURACY -->
    <div class="card" id="screen-accuracy" style="display:none">
      <h1>–•–æ—á–µ—à—å —Ç–æ—á–Ω–µ–µ? üéØ</h1>
      <div class="muted">
        ‚Äú–¢–æ—á–Ω–æ—Å—Ç—å‚Äù –¥–æ–±–∞–≤–∏—Ç –µ—â—ë <b>2 –≤–æ–ø—Ä–æ—Å–∞</b> –∏ —É–º–µ–Ω—å—à–∏—Ç –Ω–∏—á—å–∏ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏.
      </div>
      <div class="divider"></div>
      <div class="hint">
        –ß—Ç–æ –¥–∞—ë—Ç —Ç–æ—á–Ω–æ—Å—Ç—å:
        <ul style="margin:8px 0 0; padding-left:18px; line-height:1.4">
          <li>—Ä–µ–∂–µ –±—É–¥–µ—Ç ‚Äú–Ω–∞ –≥—Ä–∞–Ω–∏ —Å –¥—Ä—É–≥–∏–º —Ç–∏–ø–æ–º‚Äù</li>
          <li>–ª—É—á—à–µ –ª–æ–≤–∏—Ç ‚Äú–ø—Ä–µ—Å—Ç–∏–∂–Ω–∏–∫–∞ / —Å–æ—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ / –∏–Ω—Ñ–∞–Ω—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ‚Äù</li>
          <li>—Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ–ª–µ–µ ‚Äú—É–∑–Ω–∞–≤–∞–µ–º—ã–π‚Äù –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏</li>
        </ul>
      </div>
      <div style="height:12px"></div>
      <div class="actions">
        <button class="btn primary" id="accuracyBtn">üéØ –£—Ç–æ—á–Ω–∏—Ç—å (+2 –≤–æ–ø—Ä–æ—Å–∞)</button>
        <button class="btn" id="skipAccuracyBtn">‚ö° –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ–π—á–∞—Å</button>
      </div>
      <div class="muted small" style="margin-top:10px">–°–ø–æ–π–ª–µ—Ä: +2 –≤–æ–ø—Ä–æ—Å–∞ ‚Äî —ç—Ç–æ –µ—â—ë ~12 —Å–µ–∫—É–Ω–¥.</div>
    </div>

    <!-- RESULT -->
    <div class="card" id="screen-result" style="display:none">
      <h1 id="rTitle">–¢—ã ‚Äî ...</h1>
      <div class="muted" id="rSubtitle"></div>

      <div style="height:12px"></div>
      <div class="card" style="margin:0; background:#10121a" id="rBody"></div>

      <div style="height:12px"></div>
      <div class="actions">
        <button class="btn primary" id="shareBtn">üì£ –ü–µ—Ä–µ—Å–ª–∞—Ç—å –≤ —à–∫–æ–ª—å–Ω—ã–π —á–∞—Ç</button>
        <button class="btn" id="memeBtn">üßæ –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –º–µ–º</button>
        <button class="btn" id="restartBtn">üîÅ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
        <button class="btn" id="ctaBtn">üéØ –£–∑–Ω–∞—Ç—å –ø—Ä–æ –ê–π–î–∞–ö–µ–º–ø</button>
      </div>

      <div class="muted small" style="margin-top:10px">
        –ü–æ–¥–µ–ª–∏—Ç—å—Å—è: –º—ã –∫–æ–ø–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –≤ –±—É—Ñ–µ—Ä. –°–∫—Ä–∏–Ω —Ç–æ–∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è üòâ
      </div>
    </div>

  </div>

<script>
  const tg = window.Telegram?.WebApp;
  try {
    if (tg) {
      tg.expand();
      tg.ready();
      tg.setHeaderColor?.("#0b0c10");
      tg.setBackgroundColor?.("#0b0c10");
    }
  } catch (e) {}

  // ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  const BOT_USERNAME = "schoolchat1_bot";     // @schoolchat1_bot
  const CTA_URL = "https://aidacamp.ru/";     // –ê–π–î–∞–ö–µ–º–ø
  const APP_DEEPLINK = () => `https://t.me/${BOT_USERNAME}?startapp=schoolchat`;

  // ‚úÖ –í–°–¢–ê–í–õ–ï–ù–û: Apps Script WebApp URL
  const STATS_URL = "https://script.google.com/macros/s/AKfycbyKYHYE-05LcVAG-_bQFRwQgh6CkCA51IlfbTut5rH8BzluATdhtxd7-7pzAgislzqQ/exec";

  // ===== refs =====
  const screens = {
    start: document.getElementById("screen-start"),
    quiz: document.getElementById("screen-quiz"),
    accuracy: document.getElementById("screen-accuracy"),
    result: document.getElementById("screen-result"),
  };

  const qText = document.getElementById("qText");
  const answersEl = document.getElementById("answers");
  const progressPill = document.getElementById("progressPill");
  const microPill = document.getElementById("microPill");
  const userHint = document.getElementById("userHint");

  const rTitle = document.getElementById("rTitle");
  const rSubtitle = document.getElementById("rSubtitle");
  const rBody = document.getElementById("rBody");

  const shareBtn = document.getElementById("shareBtn");
  const memeBtn = document.getElementById("memeBtn");
  const restartBtn = document.getElementById("restartBtn");
  const ctaBtn = document.getElementById("ctaBtn");

  const toxicSwitch = document.getElementById("toxicSwitch");
  const toxicLabel = document.getElementById("toxicLabel");
  const toxicExplain = document.getElementById("toxicExplain");

  const accuracyBtn = document.getElementById("accuracyBtn");
  const skipAccuracyBtn = document.getElementById("skipAccuracyBtn");

  // ===== Visible error log =====
  const errBox = document.getElementById("errBox");
  function logErr(msg){
    if (!errBox) return;
    errBox.textContent += (errBox.textContent ? "\n" : "") + msg;
  }
  window.onerror = (msg) => logErr("JS error: " + msg);
  window.onunhandledrejection = (e) => logErr("Promise error: " + (e.reason?.message || e.reason || "unknown"));

  // ===== user payload (tg login) =====
  function getTgUser() {
    const u = tg?.initDataUnsafe?.user || {};
    return {
      user_id: u.id || null,
      username: u.username ? `@${u.username}` : null,
      first_name: u.first_name || null,
      last_name: u.last_name || null,
      platform: tg?.platform || null,
      chat_type: tg?.initDataUnsafe?.chat_type || null,
    };
  }

  // ===== stats tracking =====
  let currentResultId = null;

  async function track(event, extra = {}) {
    try {
      const u = getTgUser();
      const payload = {
        event,
        bot: BOT_USERNAME,
        ...u,
        toxic: toxicMode,
        accuracy: usedAccuracy,
        result: currentResultId,
        question_count: questions.length,
        extra
      };
      await fetch(STATS_URL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(payload),
        keepalive: true
      });
    } catch (e) {
      // —Ç–∏—Ö–æ
    }
  }

  // ===== toxic toggle =====
  let toxicMode = false;
  function setToxic(on){
    toxicMode = !!on;
    if (toxicMode) {
      toxicSwitch.classList.add("on");
      toxicSwitch.setAttribute("aria-checked","true");
      toxicLabel.textContent = "–†–µ–∂–∏–º —Ç–æ–∫—Å–∏–∫: ON";
      toxicExplain.textContent = "ON ‚Äî —è–∑–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ ‚Äú–∫–∞–∫ –≤ —á–∞—Ç–µ‚Äù. OFF ‚Äî –º—è–≥–∫–æ –∏ –ø–æ-–¥–æ–±—Ä–æ–º—É.";
    } else {
      toxicSwitch.classList.remove("on");
      toxicSwitch.setAttribute("aria-checked","false");
      toxicLabel.textContent = "–†–µ–∂–∏–º —Ç–æ–∫—Å–∏–∫: OFF";
      toxicExplain.textContent = "OFF ‚Äî –º—è–≥–∫–æ –∏ –ø–æ-–¥–æ–±—Ä–æ–º—É. ON ‚Äî —è–∑–≤–∏—Ç–µ–ª—å–Ω–æ –∏ ‚Äú–∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —á–∞—Ç–µ‚Äù (–Ω–æ –±–µ–∑ –∂–µ—Å—Ç–∏).";
    }
    track("toxic_toggle", { on: toxicMode });
  }
  toxicSwitch.addEventListener("click", () => setToxic(!toxicMode));
  setToxic(false);

  // ===== Types (12) =====
  const TYPES = [
    mkType("investor","–†–æ–¥–∏—Ç–µ–ª—å-–ò–Ω–≤–µ—Å—Ç–æ—Ä","üìà","INV","¬´–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ = –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–±—ë–Ω–∫–∞¬ª",
      "–¢—ã –ø–æ–∫—É–ø–∞–µ—à—å —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é, —Å—Ä–µ–¥—É –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",
      ["–°–ø—Ä–∞—à–∏–≤–∞–µ—à—å –ø—Ä–æ –Ω–∞–≤—ã–∫–∏, –ø—Ä–æ–µ–∫—Ç—ã –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.","–ù–µ —Ç–æ—Ä–≥—É–µ—à—å—Å—è —Ä–∞–¥–∏ –≥–∞–ª–æ—á–∫–∏.","–°–º–æ—Ç—Ä–∏—à—å –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ–∫."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –¥–∞–ª—å–Ω–æ–∑–æ—Ä–∫–æ—Å—Ç—å –∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Ä–µ–±—ë–Ω–∫–∞ –≤ ‚Äú—Å—Ç–∞—Ä—Ç–∞–ø‚Äù.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –ø—Ä–æ–µ–∫—Ç–Ω–∞—è —Å–º–µ–Ω–∞, –∑–∞—â–∏—Ç–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏.",
      "–¢—ã: ¬´–≥–¥–µ ROI –∏ –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ 3 –≥–æ–¥–∞?¬ª",
      ["–°–Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è. –ü–æ—Ç–æ–º —ç–º–æ—Ü–∏–∏.","–¢—ã –ø–æ–∫—É–ø–∞–µ—à—å —Å—Ä–µ–¥—É, –∞ –Ω–µ ‚Äú–∞–Ω–∏–º–∞—Ü–∏—é‚Äù.","–õ—é–±–∏—à—å, –∫–æ–≥–¥–∞ –≤—Å—ë –º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≤–∑—Ä–æ—Å–ª–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞.",
      "–†–∏—Å–∫: ‚Äú–ø–µ—Ä–µ–¥–∏–∑–∞–π–Ω–∏—Ç—å‚Äù –¥–µ—Ç—Å—Ç–≤–æ.",
      "–î–∞–π 1 –∑–æ–Ω—É —Å–≤–æ–±–æ–¥—ã: –ø—É—Å—Ç—å —Ä–µ–±—ë–Ω–æ–∫ —Å–∞–º –≤—ã–±–µ—Ä–µ—Ç —á–∞—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π."
    ),
    mkType("econom","–†–æ–¥–∏—Ç–µ–ª—å-–≠–∫–æ–Ω–æ–º","üßÆ","ECO","¬´–ê –ø–æ—á–µ–º—É —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ?¬ª",
      "–¢—ã –∑–∞—â–∏—â–∞–µ—à—å –±—é–¥–∂–µ—Ç –∫–∞–∫ —Å–ø–µ—Ü–Ω–∞–∑.",
      ["–°—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –ø–∞–∫–µ—Ç—ã.","–õ—é–±–∏—à—å –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–µ–Ω—ã –∏ —á—Ç–æ –≤—Ö–æ–¥–∏—Ç.","–ü–æ–∫—É–ø–∞–µ—à—å, –∫–æ–≥–¥–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–æ–∫–∞–∑–∞–ª–∏."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: ‚Äú–¥–µ—à–µ–≤–ª–µ‚Äù –∏–Ω–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç –¥–æ—Ä–æ–∂–µ.",
      "–¢—Ä–∏–≥–≥–µ—Ä: —Ü–∏—Ñ—Ä—ã, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å.",
      "–¢—ã: ¬´–∞ –º–æ–∂–Ω–æ —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ?¬ª",
      ["–°–º–µ—Ç–∞ ‚Äî —Ç–≤–æ—è —Ä–µ–ª–∏–≥–∏—è.","–ü—Ä–æ–º–æ–∫–æ–¥—ã –Ω–∞—Ö–æ–¥–∏—à—å –≤ —Ç–µ–º–Ω–æ—Ç–µ.","–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –≤–∏–¥–∏—à—å –∑–∞ –∫–∏–ª–æ–º–µ—Ç—Ä."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —Ö–æ–ª–æ–¥–Ω–∞—è –≥–æ–ª–æ–≤–∞.",
      "–†–∏—Å–∫: –º–æ–∂–µ—à—å —É–ø—É—Å—Ç–∏—Ç—å –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ —Å—Ä–µ–¥–µ.",
      "–°–º–æ—Ç—Ä–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ü–µ–Ω—É: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å/–∫–æ–º–∞–Ω–¥–∞/–ø—Ä–æ–≥—Ä–∞–º–º–∞."
    ),
    mkType("insurer","–†–æ–¥–∏—Ç–µ–ª—å-–°—Ç—Ä–∞—Ö–æ–≤–∞—Ç–µ–ª—å","üõ°Ô∏è","SAFE","¬´–ê –µ—Å–ª–∏ –æ–Ω —É–ø–∞–¥—ë—Ç?!¬ª",
      "–¢—ã –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–∏—Å–∫–æ–≤. –ò —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤—Å–µ–º.",
      ["–°–ø—Ä–æ—Å–∏—à—å –ø—Ä–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.","–õ—é–±–∏—à—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.","–ü–æ–∫—É–ø–∞–µ—à—å, –∫–æ–≥–¥–∞ –≤—Å—ë —Å–ø–æ–∫–æ–π–Ω–æ –æ–±—ä—è—Å–Ω–∏–ª–∏."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: —Ç—Ä–µ–≤–æ–≥–∞ —Å—ä–µ–¥–∞–µ—Ç —Ä–∞–¥–æ—Å—Ç—å.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø—Ä–∞–≤–∏–ª–∞, –º–µ–¥—Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ.",
      "–¢—ã: ¬´–ø–æ–∫–∞ –Ω–µ —É–≤–∏–∂—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç ‚Äî —Ä–µ–±—ë–Ω–æ–∫ –Ω–µ –¥—ã—à–∏—Ç¬ª",
      ["‚Äú–ê –≤–¥—Ä—É–≥‚Äù ‚Äî —Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å.","–¢–µ–ª–µ—Ñ–æ–Ω/–∫–æ–Ω—Ç–∞–∫—Ç—ã/–∞–ø—Ç–µ—á–∫–∞ ‚Äî –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å.","–¢—ã –∑–Ω–∞–µ—à—å –≤—Å–µ —Å—Ç—Ä–∞—à–∏–ª–∫–∏."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ.",
      "–†–∏—Å–∫: –≤–µ—á–Ω—ã–π —Ä–µ–∂–∏–º –ß–°.",
      "–ü—Ä–æ—Å–∏ —Ñ–∞–∫—Ç—ã ‚Äî –∏ –∑–∞–∫—Ä—ã–≤–∞–π –≤–æ–ø—Ä–æ—Å, –Ω–µ –¥–æ–∫—Ä—É—á–∏–≤–∞–π –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ."
    ),
    mkType("overloaded","–†–æ–¥–∏—Ç–µ–ª—å-–ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π","‚ö°","FAST","¬´–°—Å—ã–ª–∫—É. –û–ø–ª–∞—Ç–∏—Ç—å. –ì–æ—Ç–æ–≤–æ.¬ª",
      "–£ —Ç–µ–±—è —Å–æ–∑–≤–æ–Ω—ã –∂—Ä—É—Ç –∂–∏–∑–Ω—å. –ù—É–∂–Ω–∞ 1 –∫–Ω–æ–ø–∫–∞.",
      ["–ü–æ–∫—É–ø–∞–µ—à—å –±—ã—Å—Ç—Ä–æ, –µ—Å–ª–∏ –ø—É—Ç—å –±–µ–∑ —Ç—Ä–µ–Ω–∏—è.","–ù–µ —á–∏—Ç–∞–µ—à—å –ø—Ä–æ—Å—Ç—ã–Ω–∏.","–í—ã–±–æ—Ä ‚Äî –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ‚Äú—Å–¥–µ–ª–∞–π—Ç–µ –∑–∞ –º–µ–Ω—è‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π.",
      "–†–∏—Å–∫: –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–∞–ª–∏.",
      "–¢—Ä–∏–≥–≥–µ—Ä: ‚Äú–ø–æ–¥ –∫–ª—é—á‚Äù, –æ–¥–∏–Ω –ª–∏–Ω–∫, –æ–¥–∏–Ω —à–∞–≥.",
      "–¢—ã: ¬´–µ—â—ë –æ–¥–∏–Ω —á–∞—Ç ‚Äî –∏ —è —É—Ö–æ–∂—É –≤ –º–æ–Ω–∞—Å—Ç—ã—Ä—å¬ª",
      ["40 —Å—Ç—Ä–æ–∫ —Ç–µ–∫—Å—Ç–∞ ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –±–æ–ª—å.","–ï—Å–ª–∏ –Ω–∞–¥–æ –¥—É–º–∞—Ç—å ‚Äî —Ç—ã —É–∂–µ –Ω–∞ —Å–æ–∑–≤–æ–Ω–µ.","–õ—é–±–∏—à—å, –∫–æ–≥–¥–∞ –≤—Å—ë —Å–¥–µ–ª–∞–Ω–æ –∑–∞ —Ç–µ–±—è."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: ‚Äú–ª–∏—à—å –±—ã –±—ã—Å—Ç—Ä–æ‚Äù –∏–Ω–æ–≥–¥–∞ –∫—É—Å–∞–µ—Ç—Å—è.",
      "–î–µ—Ä–∂–∏ –º–∏–Ω–∏-—á–µ–∫–ª–∏—Å—Ç –Ω–∞ 30 —Å–µ–∫—É–Ω–¥ ‚Äî –∏ –≤—Å—ë."
    ),
    mkType("overheated","–†–æ–¥–∏—Ç–µ–ª—å-–ü–µ—Ä–µ–≥—Ä–µ—Ç—ã–π","üß†","BRAIN","¬´–Ø –ø–æ—á–∏—Ç–∞–ª(–∞) 8 —Ñ–æ—Ä—É–º–æ–≤‚Ä¶¬ª",
      "–¢—ã –≤ –∫—É—Ä—Å–µ –≤—Å–µ–≥–æ. –ò–Ω–æ–≥–¥–∞ –¥–∞–∂–µ —Å–ª–∏—à–∫–æ–º.",
      ["–ó–∞–¥–∞—ë—à—å –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤.","–°—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å –º–µ—Ç–æ–¥–∏–∫–∏ –∏ –ø–æ–¥—Ö–æ–¥—ã.","–ü–æ–∫—É–ø–∞–µ—à—å, –∫–æ–≥–¥–∞ –æ—Ç–≤–µ—á–∞—é—Ç —Ñ–∞–∫—Ç–∞–º–∏."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≥–ª—É–±–∏–Ω–∞.",
      "–†–∏—Å–∫: —É—Ç–æ–Ω—É—Ç—å –≤ –≤—ã–±–æ—Ä–µ.",
      "–¢—Ä–∏–≥–≥–µ—Ä: —Å–ø–æ–∫–æ–π–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã + —Ñ–∞–∫—Ç—ã + –ø—Ä–∏–º–µ—Ä—ã.",
      "–¢—ã: ¬´—É –º–µ–Ω—è 47 —É—Ç–æ—á–Ω–µ–Ω–∏–π, –¥–µ—Ä–∂–∏—Ç–µ—Å—å¬ª",
      ["–ò–¥–µ–∞–ª—å–Ω—ã–π –ª–∞–≥–µ—Ä—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç‚Ä¶ –≤ —Ç–µ–æ—Ä–∏–∏.","–õ—é–±–∏—à—å –¥–æ–∫–æ–ø–∞—Ç—å—Å—è –¥–æ —Å—É—Ç–∏.","–¢–µ–±—è –Ω–µ –ø—Ä–æ–¥–∞–≤–∏—à—å —ç–º–æ—Ü–∏–µ–π."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.",
      "–†–∏—Å–∫: –≤–µ—á–Ω–æ–µ ‚Äú–µ—â—ë —á—É—Ç—å-—á—É—Ç—å –ø–æ—á–∏—Ç–∞—é‚Äù.",
      "–û–≥—Ä–∞–Ω–∏—á–∏ —Ä–µ—Å—ë—Ä—á —Ç–∞–π–º–µ—Ä–æ–º: 30 –º–∏–Ω—É—Ç ‚Äî –∏ —Ä–µ—à–µ–Ω–∏–µ."
    ),
    mkType("compensator","–†–æ–¥–∏—Ç–µ–ª—å-–ö–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä","‚ù§Ô∏è","LOVE","¬´–£ –º–µ–Ω—è —ç—Ç–æ–≥–æ –Ω–µ –±—ã–ª–æ ‚Äî —É –Ω–µ–≥–æ –±—É–¥–µ—Ç¬ª",
      "–¢—ã –¥–∞—ë—à—å —Ä–µ–±—ë–Ω–∫—É ‚Äú–ª—É—á—à–µ–µ –¥–µ—Ç—Å—Ç–≤–æ‚Äù.",
      ["–õ–µ–≥–∫–æ –ø–æ–∫—É–ø–∞–µ—à—å, –µ—Å–ª–∏ —Ä–µ–∑–æ–Ω–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—è.","–õ—é–±–∏—à—å —Ä–æ—Å—Ç –∏ —Å–º—ã—Å–ª.","–°—Ç–∞–Ω–æ–≤–∏—à—å—Å—è –æ—á–µ–Ω—å –ª–æ—è–ª—å–Ω—ã–º."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —â–µ–¥—Ä–æ—Å—Ç—å –∏ –∑–∞–±–æ—Ç–∞.",
      "–†–∏—Å–∫: –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å –æ–∂–∏–¥–∞–Ω–∏—è–º–∏.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –ª–∏—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è, —Ä–∞–∑–≤–∏—Ç–∏–µ, –ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç—å.",
      "–¢—ã: ¬´–≤–æ–∑—å–º—ë–º –≤—Å—ë. –ü—É—Å—Ç—å –±—É–¥–µ—Ç –ª—É—á—à–µ, —á–µ–º —É –º–µ–Ω—è¬ª",
      ["–¢—ã –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—à—å –±—ã—Å—Ç—Ä–æ –∏ —â–µ–¥—Ä–æ.","–¢–µ–±–µ –≤–∞–∂–µ–Ω —Å–º—ã—Å–ª.","–õ—é–±–∏—à—å ‚Äú—á—Ç–æ–±—ã –≥–æ—Ä–µ–ª–∏ –≥–ª–∞–∑–∞‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –º–æ—â–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è.",
      "–†–∏—Å–∫: —Ä–µ–±—ë–Ω–æ–∫ –º–æ–∂–µ—Ç —É—Å—Ç–∞—Ç—å –æ—Ç ‚Äú–ª—É—á—à–µ–≥–æ‚Äù.",
      "–î–æ–±–∞–≤—å –æ—Ç–¥—ã—Ö –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã."
    ),
    mkType("infantilized","–†–æ–¥–∏—Ç–µ–ª—å-–ò–Ω—Ñ–∞–Ω—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π","ü´†","HELP","¬´–ê –≤—ã —Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –Ω–∞–º –ª—É—á—à–µ¬ª",
      "–¢—ã —É—Å—Ç–∞–ª(–∞) –æ—Ç —Ä–µ—à–µ–Ω–∏–π. –¢–µ–±–µ –Ω—É–∂–µ–Ω ‚Äú–ø–∞–∫–µ—Ç‚Äù.",
      ["–õ—é–±–∏—à—å, –∫–æ–≥–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç –≤–º–µ—Å—Ç–æ —Ç–µ–±—è.","–°–ø—Ä–∞—à–∏–≤–∞–µ—à—å ‚Äú–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å?‚Äù","–ü–æ–∫—É–ø–∞–µ—à—å –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ‚Äú–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –¥–æ–≤–µ—Ä–∏–µ.",
      "–†–∏—Å–∫: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —á—É–∂–æ–≥–æ –º–Ω–µ–Ω–∏—è.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –ø–æ–¥–±–æ—Ä ‚Äú–ø–æ–¥ —Ä–µ–±—ë–Ω–∫–∞‚Äù –∏ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å.",
      "–¢—ã: ¬´—è –Ω–µ –≤—ã–±–∏—Ä–∞—é. —è —Å–æ–≥–ª–∞—à–∞—é—Å—å¬ª",
      ["–•–æ—á–µ—à—å –∫–Ω–æ–ø–∫—É ‚Äú—Å–¥–µ–ª–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ‚Äù.","–ë–æ–∏—à—å—Å—è –æ—à–∏–±–∏—Ç—å—Å—è.","–õ—é–±–∏—à—å –ø—Ä–∏–º–µ—Ä—ã ‚Äú–∫–∞–∫ —É –∑–Ω–∞–∫–æ–º—ã—Ö‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≥–∏–±–∫–æ—Å—Ç—å.",
      "–†–∏—Å–∫: –ª–µ–≥–∫–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å.",
      "–ü–æ–ø—Ä–æ—Å–∏ 2-3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ –∫—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–±–æ—Ä–∞ ‚Äî –∏ —Ä–µ—à–∞–π."
    ),
    mkType("socializer","–†–æ–¥–∏—Ç–µ–ª—å-–°–æ—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä","ü´Ç","TEAM","¬´–ì–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã –±—ã–ª–∏ —Å–≤–æ–∏¬ª",
      "–¢—ã –≤—ã–±–∏—Ä–∞–µ—à—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∫–æ–º—å—é–Ω–∏—Ç–∏.",
      ["–°–º–æ—Ç—Ä–∏—à—å, –≥–¥–µ –¥—Ä—É–∑—å—è –∏ –∫–æ–º–∞–Ω–¥–∞.","–í–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–µ–±—ë–Ω–æ–∫ —Å–æ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è.","–õ—é–±–∏—à—å –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –∏ ‚Äú—Å–≤–æ–∏—Ö‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Å—Ä–µ–¥–µ.",
      "–†–∏—Å–∫: –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –∫–æ–º—å—é–Ω–∏—Ç–∏, —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥, –æ—Ç—Ä—è–¥–Ω–∞—è –∂–∏–∑–Ω—å.",
      "–¢—ã: ¬´–∫—É–¥–∞ –∏–¥—É—Ç –Ω–∞—à–∏? –º–Ω–µ —Ç—É–¥–∞ –∂–µ¬ª",
      ["–û–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç.","–¢–µ–±—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ç –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞.","–°–∏–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö ‚Äî ‚Äú–±—É–¥–µ—Ç –æ–¥–∏–Ω‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —ç–º–ø–∞—Ç–∏—è.",
      "–†–∏—Å–∫: ‚Äú–≥–ª–∞–≤–Ω–æ–µ –¥—Ä—É–∑—å—è‚Äù –º–æ–∂–µ—Ç –ø–æ–±–µ–¥–∏—Ç—å –ø–æ–ª—å–∑—É.",
      "–°–º–æ—Ç—Ä–∏ –±–∞–ª–∞–Ω—Å: —Å—Ä–µ–¥–∞ + –Ω–∞–≤—ã–∫–∏."
    ),
    mkType("prestige","–†–æ–¥–∏—Ç–µ–ª—å-–ü—Ä–µ—Å—Ç–∏–∂–Ω–∏–∫","üíé","VIP","¬´–ß—Ç–æ–±—ã –Ω–µ —Å—Ç—ã–¥–Ω–æ¬ª",
      "–°—Ç–∞—Ç—É—Å ‚Äî —Ç–≤–æ–π –∫–æ–º–ø–∞—Å.",
      ["–õ—é–±–∏—à—å –±—Ä–µ–Ω–¥—ã, –Ω–∞–≥—Ä–∞–¥—ã, –ø–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–∞.","–¢–µ–±–µ –≤–∞–∂–Ω–æ ‚Äú—É—Ä–æ–≤–µ–Ω—å‚Äù.","–°–º–æ—Ç—Ä–∏—à—å –Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—é."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≤–∫—É—Å –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã.",
      "–†–∏—Å–∫: –ø–µ—Ä–µ–ø–ª–∞—Ç–∏—Ç—å –∑–∞ ‚Äú–æ–±–ª–æ–∂–∫—É‚Äù.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –ø—É–±–ª–∏—á–Ω–æ—Å—Ç—å, –Ω–∞–≥—Ä–∞–¥—ã, –ø–∞—Ä—Ç–Ω—ë—Ä—ã, –∫–µ–π—Å—ã.",
      "–¢—ã: ¬´–¥–µ–ª–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ –∏ –î–û–†–û–ì–û¬ª",
      ["–°—Ç–∞—Ç—É—Å —Ä–µ—à–∞–µ—Ç.","–¢–µ–±—è —Ü–µ–ø–ª—è–µ—Ç ‚Äú–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ/–ø–∞—Ä—Ç–Ω—ë—Ä/–≤ —Ä–µ–µ—Å—Ç—Ä–µ‚Äù.","–•–æ—á–µ—à—å, —á—Ç–æ–±—ã –±—ã–ª–æ ‚Äú–∫–∞–∫ –Ω–∞–¥–æ‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –≤—ã—Å–æ–∫–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç.",
      "–†–∏—Å–∫: –∏–Ω–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–Ω—Ç—ã.",
      "–ü—Ä–æ—Å–∏ —Ñ–∞–∫—Ç—ã: —á—Ç–æ –∑–∞ —ç—Ç–∏–º —Å—Ç–∞—Ç—É—Å–æ–º —Å—Ç–æ–∏—Ç –Ω–∞ –¥–µ–ª–µ."
    ),
    mkType("leave_me","–†–æ–¥–∏—Ç–µ–ª—å ¬´–û—Ç—Å—Ç–∞–Ω—å—Ç–µ-–æ—Ç-–º–µ–Ω—è¬ª","üßò","ZEN","¬´–Ø –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É —Ç–∏—à–∏–Ω—ã¬ª",
      "–¢–µ–±–µ –Ω—É–∂–µ–Ω –æ—Ç–¥—ã—Ö –≤—Å–µ–º: –∏ —Ä–µ–±—ë–Ω–∫—É, –∏ —Ç–µ–±–µ.",
      ["–¢—ã –≤—ã–∫–ª—é—á–∞–µ—à—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.","–ü–æ–∫—É–ø–∞–µ—à—å –ø–æ–∑–¥–Ω–æ ‚Äî –∫–æ–≥–¥–∞ –º–µ—Å—Ç —É–∂–µ –Ω–µ—Ç.","–õ—é–±–∏—à—å ‚Äú—á—Ç–æ–±—ã —Ä–µ–±—ë–Ω–æ–∫ –±—ã–ª –∑–∞–Ω—è—Ç‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —á–µ—Å—Ç–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: —É–ø—É—Å—Ç–∏—Ç—å —Ö–æ—Ä–æ—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.",
      "–¢—Ä–∏–≥–≥–µ—Ä: ‚Äú–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ‚Äù, –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.",
      "–¢—ã: ¬´–Ω–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –º–µ–Ω—è –∏ –±—É–¥–µ—Ç –º–∏—Ä¬ª",
      ["–ß–∞—Ç—ã ‚Äî –±–æ–ª—å.","–†–µ—à–µ–Ω–∏—è ‚Äî –ø–æ–∑–∂–µ.","–¢–∏—à–∏–Ω–∞ ‚Äî —Ü–µ–ª—å."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —É–º–µ–Ω–∏–µ –Ω–µ –¥—Ä–∞–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å.",
      "–†–∏—Å–∫: –æ—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ.",
      "–õ–∞–π—Ñ—Ö–∞–∫: –ø–æ—Å—Ç–∞–≤—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –≤—ã–±–æ—Ä –∑–∞—Ä–∞–Ω–µ–µ."
    ),
    mkType("planner","–†–æ–¥–∏—Ç–µ–ª—å-–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫","üìã","PLAN","¬´–õ–∞–≥–µ—Ä—å ‚Äî —Å—Ç—Ä–æ–∫–∞ –≤ Excel¬ª",
      "–£ —Ç–µ–±—è –ø–ª–∞–Ω. –ò —É –ø–ª–∞–Ω–∞ –µ—Å—Ç—å –ø–ª–∞–Ω.",
      ["–õ—é–±–∏—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ç–∞–π–º–∏–Ω–≥.","–°–æ–±–∏—Ä–∞–µ—à—å –≤—Å—ë –≤ —Ç–∞–±–ª–∏—Ü—ã.","–í—ã–±–∏—Ä–∞–µ—à—å –ª–æ–≥–∏–∫–æ–π."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —Å–∏—Å—Ç–µ–º–Ω–æ—Å—Ç—å.",
      "–†–∏—Å–∫: –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.",
      "–¢—Ä–∏–≥–≥–µ—Ä: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–æ–≥—Ä–∞–º–º–∞, —á—ë—Ç–∫–∏–µ —ç—Ç–∞–ø—ã.",
      "–¢—ã: ¬´—Å–¥–µ–ª–∞—é —Ç–∞–±–ª–∏—á–∫—É –∏ –≤—Å–µ–º —Ä–∞–∑–¥–∞–º —Ä–æ–ª–∏¬ª",
      ["–¢—ã —Å–ø–∞—Å–∞—Ç–µ–ª—å —á–∞—Ç–∞.","–í—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ –ø–æ–ª–æ—á–∫–∞–º.","–¢—ã –ª—é–±–∏—à—å –∫–æ–Ω—Ç—Ä–æ–ª—å."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –ø–æ—Ä—è–¥–æ–∫.",
      "–†–∏—Å–∫: —É—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.",
      "–û—Å—Ç–∞–≤—å 1 ‚Äú—Ö–∞–æ—Å-–æ–∫–Ω–æ‚Äù –≤ –Ω–µ–¥–µ–ª—é ‚Äî –¥–ª—è –∂–∏–∑–Ω–∏."
    ),
    mkType("skeptic","–†–æ–¥–∏—Ç–µ–ª—å-–°–∫–µ–ø—Ç–∏–∫","üïµÔ∏è","PROOF","¬´–î–æ–∫—É–º–µ–Ω—Ç—ã –≥–¥–µ?¬ª",
      "–¢—ã —Ñ–∏–ª—å—Ç—Ä –æ—Ç –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞. –í–µ—Ä–∏—à—å —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–∞–º.",
      ["–ü—Ä–æ–≤–µ—Ä—è–µ—à—å –¥–æ–≥–æ–≤–æ—Ä—ã/–¥–æ–∫—É–º–µ–Ω—Ç—ã/–æ—Ç–∑—ã–≤—ã.","–ù–µ –≤–µ–¥—ë—à—å—Å—è –Ω–∞ ‚Äú—á–µ—Å—Ç–Ω–æ-—á–µ—Å—Ç–Ω–æ‚Äù.","–ö—É–ø–∏–≤ ‚Äî —Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è –ª–æ—è–ª—å–Ω—ã–º."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: –∑–∞—â–∏—Ç–∞ –æ—Ç –µ—Ä—É–Ω–¥—ã.",
      "–†–∏—Å–∫: ‚Äú–Ω–µ –∫—É–ø–∏—Ç—å –Ω–∏–∫–æ–≥–¥–∞‚Äù.",
      "–¢—Ä–∏–≥–≥–µ—Ä: –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞.",
      "–¢—ã: ¬´–ø–æ–∫–∞ –Ω–µ –¥–æ–∫–∞–∂–µ—Ç–µ ‚Äî —ç—Ç–æ —Ñ–µ–π–∫¬ª",
      ["–°–ª–æ–≤–∞ –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è.","–í–æ–ø—Ä–æ—Å—ã ‚Äî —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞.","–ü–æ–¥–≤–æ—Ö –≤–∏–¥–∏—à—å –≤ –∫–∞–∂–¥–æ–º ‚Äú–¥–æ–±—Ä—ã–π –¥–µ–Ω—å‚Äù."],
      "–°–∏–ª—å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: —á–µ—Å—Ç–Ω—ã–π –æ—Ç–±–æ—Ä.",
      "–†–∏—Å–∫: –æ—Ç—Å–µ—è—Ç—å —Ö–æ—Ä–æ—à–µ–µ –≤–º–µ—Å—Ç–µ —Å –ø–ª–æ—Ö–∏–º.",
      "–û–ø—Ä–µ–¥–µ–ª–∏ 3 –∫—Ä–∏—Ç–µ—Ä–∏—è ‚Äú–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–∫–∞–∑–∞–Ω–æ‚Äù –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è."
    ),
  ];

  function mkType(id,name,emoji,label,meme,softTitle,softBullets,softStrength,softRisk,softTip,toxTitle,toxBullets,toxStrength,toxRisk,toxTip){
    return {
      id, name, emoji, label, meme,
      short: `–Ø ‚Äî ${emoji} ${name}. ${meme}`,
      soft:{ title:softTitle, bullets:softBullets, strengths:softStrength, risks:softRisk, tip:softTip },
      toxic:{ title:toxTitle, bullets:toxBullets, strengths:toxStrength, risks:toxRisk, tip:toxTip }
    };
  }

  // ===== SVG avatars =====
  const TYPE_SVG = Object.fromEntries(
    TYPES.map(t => [t.id, svgCoin(t.label, t.emoji, pickAccent(t.id).accent, pickAccent(t.id).deep)])
  );

  function pickAccent(id){
    const map = {
      investor:{accent:"#2b5cff",deep:"#0b1b3a"},
      econom:{accent:"#00c2a8",deep:"#052a25"},
      insurer:{accent:"#22c55e",deep:"#062612"},
      overloaded:{accent:"#f59e0b",deep:"#2a1600"},
      overheated:{accent:"#a855f7",deep:"#20072f"},
      compensator:{accent:"#ef4444",deep:"#2a0606"},
      infantilized:{accent:"#60a5fa",deep:"#071a2f"},
      socializer:{accent:"#10b981",deep:"#06261f"},
      prestige:{accent:"#eab308",deep:"#2a1f00"},
      leave_me:{accent:"#94a3b8",deep:"#0a1220"},
      planner:{accent:"#38bdf8",deep:"#062433"},
      skeptic:{accent:"#f97316",deep:"#2a1206"},
    };
    return map[id] || {accent:"#64748b",deep:"#0b1020"};
  }

  function svgCoin(label, emoji, accent, deep) {
    const gid = label.replace(/[^a-z0-9]/gi,'');
    return `
<svg width="64" height="64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-label="${label}">
  <defs>
    <radialGradient id="g1-${gid}" cx="30%" cy="25%" r="70%">
      <stop offset="0%" stop-color="${accent}" stop-opacity="0.95"/>
      <stop offset="55%" stop-color="${deep}" stop-opacity="0.98"/>
      <stop offset="100%" stop-color="#070812" stop-opacity="1"/>
    </radialGradient>
    <linearGradient id="ring-${gid}" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="rgba(255,255,255,.40)"/>
      <stop offset="35%" stop-color="rgba(255,255,255,.10)"/>
      <stop offset="100%" stop-color="rgba(0,0,0,.35)"/>
    </linearGradient>
  </defs>

  <circle cx="32" cy="32" r="29" fill="url(#g1-${gid})"/>
  <circle cx="32" cy="32" r="28" fill="none" stroke="url(#ring-${gid})" stroke-width="2"/>
  <circle cx="32" cy="32" r="20.5" fill="rgba(0,0,0,.18)" stroke="rgba(255,255,255,.14)" stroke-width="1.2"/>

  <text x="32" y="36" text-anchor="middle" font-size="22"
        font-family="system-ui,Apple Color Emoji,Segoe UI Emoji">${emoji}</text>
  <text x="32" y="54" text-anchor="middle" font-size="9.5" letter-spacing="1"
        font-family="system-ui,Segoe UI,Roboto,Arial" fill="rgba(255,255,255,.78)">${label}</text>

  <path d="M14 20 C20 10, 38 8, 50 18 C40 14, 26 14, 14 20 Z" fill="rgba(255,255,255,.12)"/>
</svg>`;
  }

  function renderAvatar(typeId){
    const svg = TYPE_SVG[typeId] || svgCoin("TYPE","üôÇ","#64748b","#0b1020");
    return `<div class="avatar">${svg}</div>`;
  }

  // ===== Questions =====
  const BASE_QUESTIONS = [
    {
      q: "¬´–°–∫–∏–¥—ã–≤–∞–µ–º—Å—è –Ω–∞ —à—Ç–æ—Ä—ã. 1500 –¥–æ 18:00¬ª",
      a: [
        { t:"–ü–µ—Ä–µ–≤—ë–ª(–∞) –º–æ–ª—á–∞. –Ø ‚Äî —Ç–µ—Ä–º–∏–Ω–∞–ª. ‚ö°", s:{ overloaded:2 } },
        { t:"–ì–¥–µ —Å–º–µ—Ç–∞/–ö–ü/—á–µ–∫–∏? –ü–æ—á–µ–º—É 1500? üïµÔ∏è", s:{ skeptic:2, econom:1 } },
        { t:"–ù–∞–π–¥—É –ª—É—á—à–µ: –±–ª—ç–∫–∞—É—Ç, –æ—Ç–∑—ã–≤—ã, –¥–æ—Å—Ç–∞–≤–∫–∞. üìã", s:{ planner:2, investor:1 } },
        { t:"–ì–ª–∞–≤–Ω–æ–µ: –±–µ–∑–æ–ø–∞—Å–Ω–æ/–∞–ª–ª–µ—Ä–≥–∏–∏/—Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã. üõ°Ô∏è", s:{ insurer:2 } },
        { t:"–î–æ—Ä–æ–≥–æ. –î–∞–π—Ç–µ 3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –ø—Ä–æ–º–æ. üßÆ", s:{ econom:2 } },
      ]
    },
    {
      q: "–í —á–∞—Ç –∑–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Å—Ç—ã–Ω—è –Ω–∞ 40 —Å—Ç—Ä–æ–∫: ¬´–í–ê–ñ–ù–û!!!¬ª",
      a: [
        { t:"–ö–æ—Ä–æ—Ç–∫–æ: —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∏ –¥–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏? ‚è±Ô∏è", s:{ overloaded:2 } },
        { t:"–í–∏–∂—É –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è. –£—Ç–æ—á–Ω—é –∏ –ø—Ä–æ–≤–µ—Ä—é —Ñ–∞–∫—Ç—ã. üïµÔ∏è", s:{ skeptic:2 } },
        { t:"–°–æ—Å—Ç–∞–≤–ª—é –ø–ª–∞–Ω/—Ç–∞–±–ª–∏—á–∫—É –∏ —Ä–∞–∑–¥–∞–º —Ä–æ–ª–∏. üìã", s:{ planner:2 } },
        { t:"–Ø –Ω–∞ —Å–æ–∑–≤–æ–Ω–µ. –í–µ—Ä–Ω—É—Å—å‚Ä¶ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å. ü´†", s:{ leave_me:1, overloaded:1, infantilized:1 } },
        { t:"–°–∫–∏–Ω—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ/—Å—Å—ã–ª–∫—É –∏ ‚Äú–∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ‚Äù. üß†", s:{ overheated:2 } },
      ]
    },
    {
      q: "–£—á–∏—Ç–µ–ª—å: ¬´–í–∞—à —Ä–µ–±—ë–Ω–æ–∫ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ¬ª",
      a: [
        { t:"–ó–∞–±–∏—Ä–∞–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω. –ò –∑–∞—Ä—è–¥–∫—É —Ç–æ–∂–µ. üõ°Ô∏è", s:{ insurer:2 } },
        { t:"–î–∞–π—Ç–µ —Ñ–∞–∫—Ç—ã: –∫–æ–≥–¥–∞, —Å–∫–æ–ª—å–∫–æ, –¥–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü. üïµÔ∏è", s:{ skeptic:2, planner:1 } },
        { t:"–°—Å—ã–ª–∫—É –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ: –≤—ã–±—Ä–∞–ª(–∞) ‚Üí –æ–ø–ª–∞—Ç–∏–ª(–∞). ‚ö°", s:{ overloaded:2 } },
        { t:"–≠—Ç–æ –ø—Ä–æ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –∏ —Å—Ä–µ–¥—É. –ù—É–∂–µ–Ω –ø—Ä–æ–µ–∫—Ç. üìà", s:{ investor:2 } },
        { t:"–ö–æ–º–ø–µ–Ω—Å–∏—Ä—É—é: –ø—É—Å—Ç—å –±—É–¥–µ—Ç –ª—É—á—à–µ, —á–µ–º —É –º–µ–Ω—è. ‚ù§Ô∏è", s:{ compensator:2 } },
      ]
    },
    {
      q: "–í —á–∞—Ç –∫–∏–Ω—É–ª–∏: ¬´IT-–ª–∞–≥–µ—Ä—å. –°–∫–∏–¥–∫–∞ –¥–æ –∑–∞–≤—Ç—Ä–∞¬ª",
      a: [
        { t:"–°—Ä–∞–≤–Ω—é 12 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –ù–∞–π–¥—É –¥–µ—à–µ–≤–ª–µ + –ø—Ä–æ–º–æ. üßÆ", s:{ econom:2 } },
        { t:"–ù–∞–≤—ã–∫–∏/–ø—Ä–æ–µ–∫—Ç—ã/–æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ? üìà", s:{ investor:2 } },
        { t:"–°—Å—ã–ª–∫–∞ ‚Üí –æ–ø–ª–∞—Ç–∏—Ç—å ‚Üí –Ω–µ –ø–∏—à–∏—Ç–µ –º–Ω–µ –±–æ–ª—å—à–µ. ‚ö°", s:{ overloaded:2 } },
        { t:"–î–æ–∫—É–º–µ–Ω—Ç—ã? –¥–æ–≥–æ–≤–æ—Ä? —Ä–µ–µ—Å—Ç—Ä? –æ—Ç–∑—ã–≤—ã? —Ñ–æ—Ç–æ? üïµÔ∏è", s:{ skeptic:2 } },
        { t:"–ö—É–¥–∞ –∏–¥—É—Ç –Ω–∞—à–∏/–¥—Ä—É–∑—å—è? –ú–Ω–µ –≤–∞–∂–Ω–æ –∫–æ–º—å—é–Ω–∏—Ç–∏. ü´Ç", s:{ socializer:2 } },
      ]
    },
    {
      q: "–¢–≤–æ–π —Ä–µ–∂–∏–º –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ ‚Äî —ç—Ç–æ‚Ä¶",
      a: [
        { t:"¬´–°—Å—ã–ª–∫—É. –û–ø–ª–∞—Ç–∏—Ç—å. –ì–æ—Ç–æ–≤–æ.¬ª ‚ö°", s:{ overloaded:2 } },
        { t:"¬´–î–æ–±—Ä—ã–π –¥–µ–Ω—å. –£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶¬ª üïµÔ∏è", s:{ skeptic:2 } },
        { t:"¬´–ü–æ—á–µ–º—É —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ? –î–∞–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.¬ª üßÆ", s:{ econom:2 } },
        { t:"¬´–ì–¥–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ?¬ª üìà", s:{ investor:2 } },
        { t:"¬´–ì–ª–∞–≤–Ω–æ–µ ‚Äî –∫–æ–º—å—é–Ω–∏—Ç–∏ –∏ —Å–≤–æ–∏ –ª—é–¥–∏.¬ª ü´Ç", s:{ socializer:2 } },
      ]
    },
  ];

  const ACCURACY_QUESTIONS = [
    {
      q: "–†–æ–¥–∫–æ–º: ¬´–ù–∞–¥–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫ —É—á–∏—Ç–µ–ª—é¬ª",
      a: [
        { t:"–ú–∏–Ω–∏–º–∞–ª–∫–∞. –£—á–∏—Ç–µ–ª—å –º–æ–ª–æ–¥–µ—Ü, –Ω–æ –∏–ø–æ—Ç–µ–∫–∞ —Ç–æ–∂–µ. üßÆ", s:{ econom:2 } },
        { t:"–°–¥–µ–ª–∞–µ–º —Å—Ç–∞—Ç—É—Å–Ω–æ: —á—Ç–æ–±—ã –Ω–µ —Å—Ç—ã–¥–Ω–æ –ø–µ—Ä–µ–¥ –ª—é–¥—å–º–∏. üíé", s:{ prestige:2 } },
        { t:"–Ø –≤—Å—ë –æ—Ñ–æ—Ä–º–ª—é: –±—é–¥–∂–µ—Ç, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Ç–æ–∫–æ–ª. üìã", s:{ planner:2 } },
        { t:"–ê —ç—Ç–æ –≤–æ–æ–±—â–µ –æ–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏? –ë–µ–∑ —Å–∫–∞–Ω–¥–∞–ª–æ–≤? üïµÔ∏è", s:{ skeptic:2 } },
        { t:"–ú–Ω–µ –±—ã —Ç–∏—à–∏–Ω—ã. –î–∞–π—Ç–µ –∏—Ç–æ–≥ –∏ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã. üßò", s:{ leave_me:2 } },
      ]
    },
    {
      q: "–ö—Ç–æ-—Ç–æ –ø–∏—à–µ—Ç: ¬´–ê —á—Ç–æ –Ω–∞–º –ª—É—á—à–µ –≤—ã–±—Ä–∞—Ç—å?¬ª",
      a: [
        { t:"–ü–æ–¥–±–µ—Ä—É ‚Äú–ø–∞–∫–µ—Ç‚Äù: 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ –∫—Ä–∏—Ç–µ—Ä–∏–π. üìã", s:{ planner:2 } },
        { t:"–°–∫–∞–∂–∏—Ç–µ —Å–∞–º–∏, —á—Ç–æ –ª—É—á—à–µ. –Ø –±–æ—é—Å—å –æ—à–∏–±–∏—Ç—å—Å—è. ü´†", s:{ infantilized:2 } },
        { t:"–¶–µ–ª—å ‚Üí –Ω–∞–≤—ã–∫–∏ ‚Üí —Å—Ä–µ–¥–∞ ‚Üí –ø–ª–∞–Ω. –ò –ø–æ–µ—Ö–∞–ª–∏. üìà", s:{ investor:2 } },
        { t:"–°–Ω–∞—á–∞–ª–∞ –¥–æ–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ –Ω–µ –µ—Ä—É–Ω–¥–∞. –î–æ–∫—É–º–µ–Ω—Ç—ã? üïµÔ∏è", s:{ skeptic:2 } },
        { t:"–ü—É—Å—Ç—å –±—É–¥–µ—Ç –ª—É—á—à–µ–µ. –£ –º–µ–Ω—è —ç—Ç–æ–≥–æ –Ω–µ –±—ã–ª–æ. ‚ù§Ô∏è", s:{ compensator:2 } },
      ]
    },
  ];

  // ===== State =====
  let idx = 0;
  let score = {};
  let questions = [];
  let usedAccuracy = false;

  function show(screen) {
    Object.values(screens).forEach(s => s.style.display = "none");
    screens[screen].style.display = "block";
  }

  function addScore(map) {
    for (const [k,v] of Object.entries(map)) score[k] = (score[k]||0) + v;
  }

  function renderQuestion() {
    const q = questions[idx];
    const total = questions.length;
    progressPill.textContent = `–í–æ–ø—Ä–æ—Å ${idx+1}/${total}`;
    microPill.textContent = `–µ—â—ë ${Math.max(0,total-(idx+1))} –∫–ª–∏–∫–∞ –¥–æ –¥–∏–∞–≥–Ω–æ–∑–∞`;
    qText.textContent = q.q;

    answersEl.innerHTML = "";
    q.a.forEach((opt) => {
      const b = document.createElement("button");
      b.className = "btn";
      b.textContent = opt.t;
      b.onclick = () => {
        track("answer", { q_index: idx, option: opt.t });
        addScore(opt.s);
        idx++;

        if (!usedAccuracy && idx === BASE_QUESTIONS.length) {
          track("accuracy_offer");
          show("accuracy");
          return;
        }

        if (idx < total) renderQuestion();
        else renderResult();
      };
      answersEl.appendChild(b);
    });
  }

  function top2Types() {
    const entries = TYPES.map(t => [t.id, score[t.id] || 0]);
    entries.sort((a,b)=>b[1]-a[1]);
    const [t1, t2] = entries;
    return { t1, t2 };
  }

  function buildResultText(best, second, delta, short=false) {
    const add = (delta <= 1 && second) ? ` (–∏ —á—É—Ç—å-—á—É—Ç—å ${second.name})` : "";
    if (short) {
      return `–Ø ‚Äî ${best.emoji} ${best.name}${add}. ${best.meme} üòà  @${BOT_USERNAME}`;
    }
    return `–Ø –ø—Ä–æ—à—ë–ª(–ª–∞) —Ç–µ—Å—Ç ¬´–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?¬ª üòà
–†–µ–∑—É–ª—å—Ç–∞—Ç: ${best.name}${add}
${best.meme}

–ü—Ä–æ–π–¥–∏ —Ç–æ–∂–µ: ${APP_DEEPLINK()}`;
  }

  function renderResult() {
    const { t1, t2 } = top2Types();
    const best = TYPES.find(x=>x.id===t1[0]) || TYPES[0];
    const second = TYPES.find(x=>x.id===t2[0]) || null;
    const delta = (t1[1] - (t2?.[1] ?? 0));

    currentResultId = best.id;

    const mode = toxicMode ? "toxic" : "soft";
    const d = best[mode];

    rTitle.textContent = `–¢—ã ‚Äî ${best.name}`;
    rSubtitle.textContent =
      (toxicMode ? `–†–µ–∂–∏–º —Ç–æ–∫—Å–∏–∫: ON ‚Ä¢ ${best.meme}` : best.meme) +
      (usedAccuracy ? " ‚Ä¢ —Ç–æ—á–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∞" : "");

    const bullets = d.bullets.map(x => `<li style="margin:6px 0">${x}</li>`).join("");

    rBody.innerHTML = `
      <div class="avatarRow">
        ${renderAvatar(best.id)}
        <div>
          <div style="font-size:16px; line-height:1.25; font-weight:800">${d.title}</div>
          <div class="typeTag">${best.meme}</div>
        </div>
      </div>

      <div class="divider"></div>

      <ul style="margin:0; padding-left:18px; font-size:15px; line-height:1.45">
        ${bullets}
      </ul>

      <div class="divider"></div>

      <div style="font-size:14px; line-height:1.45">
        <div><b>${d.strengths}</b></div>
        <div style="margin-top:8px"><b>${d.risks}</b></div>
        <div style="margin-top:10px" class="muted">${d.tip}</div>
      </div>

      ${delta <= 1 && second ? `
        <div class="divider"></div>
        <div class="muted small">–¢—ã –Ω–∞ –≥—Ä–∞–Ω–∏ —Å:</div>
        <div class="avatarRow" style="margin-top:8px">
          ${renderAvatar(second.id)}
          <div>
            <div style="font-size:14px; font-weight:700">${second.name}</div>
            <div class="typeTag">${second.meme}</div>
          </div>
        </div>
      ` : ``}

      <div class="divider"></div>
      <div class="muted small">üì∏ –°–∫—Ä–∏–Ω—å –∏ –∫–∏–¥–∞–π –≤ —á–∞—Ç. –≠—Ç–æ –ª–µ–≥–∞–ª—å–Ω–æ.</div>
      <div class="muted small">üéØ –•–æ—á–µ—à—å ‚Äú–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ‚Äù ‚Äî –∂–º–∏ –ê–π–î–∞–ö–µ–º–ø.</div>
    `;

    show("result");

    track("finish", { best: best.id, second: second?.id || null, delta, score });

    try {
      if (tg?.MainButton) {
        tg.MainButton.setText("üì£ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è");
        tg.MainButton.show();
        tg.MainButton.onClick(() => doShare(false));
      }
    } catch (e) {}
  }

  async function doShare(short=false) {
    const { t1, t2 } = top2Types();
    const best = TYPES.find(x=>x.id===t1[0]) || TYPES[0];
    const second = TYPES.find(x=>x.id===t2[0]) || null;
    const delta = (t1[1] - (t2?.[1] ?? 0));
    const text = buildResultText(best, second, delta, short);

    track(short ? "meme_copy" : "share", { short });

    try {
      await navigator.clipboard.writeText(text);
      tg?.showPopup?.({
        title:"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ",
        message: short ? "–ö–æ—Ä–æ—Ç–∫–∏–π –º–µ–º –≤ –±—É—Ñ–µ—Ä–µ. –í—Å—Ç–∞–≤—å –≤ —á–∞—Ç üòà" : "–¢–µ–∫—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±—É—Ñ–µ—Ä–µ. –í—Å—Ç–∞–≤—å –≤ —á–∞—Ç üòÑ",
        buttons:[{type:"ok"}]
      });
    } catch {
      tg?.showPopup?.({ title:"–ù–µ –≤—ã—à–ª–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å", message:"–°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ —á–∞—Ç.", buttons:[{type:"ok"}] });
    }
  }

  // ===== Accuracy actions =====
  accuracyBtn.onclick = () => {
    usedAccuracy = true;
    questions = [...BASE_QUESTIONS, ...ACCURACY_QUESTIONS];
    track("accuracy_on");
    show("quiz");
    renderQuestion();
  };

  skipAccuracyBtn.onclick = () => {
    usedAccuracy = false;
    track("accuracy_skip");
    renderResult();
  };

  // ===== Start =====
  window.startTest = function startTest() {
    score = {};
    idx = 0;
    usedAccuracy = false;
    currentResultId = null;
    questions = [...BASE_QUESTIONS];
    if (errBox) errBox.textContent = "";
    show("quiz");
    track("start");
    renderQuestion();
  };

  // Buttons
  shareBtn.onclick = () => doShare(false);
  memeBtn.onclick = () => doShare(true);

  restartBtn.onclick = () => {
    track("restart");
    show("start");
  };

  ctaBtn.onclick = () => {
    track("cta_click");
    try {
      if (tg?.openLink) tg.openLink(CTA_URL);
      else window.location.href = CTA_URL;
    } catch {
      window.location.href = CTA_URL;
    }
  };

  // init
  const u = getTgUser();
  userHint.textContent = u.username ? `–¢—ã –≤ Telegram –∫–∞–∫: ${u.first_name || ""} ${u.last_name || ""} (${u.username})`.trim()
                                   : `–¢—ã –≤ Telegram –∫–∞–∫: ${u.first_name || ""} ${u.last_name || ""}`.trim();

  // Track open once
  track("open");
</script>
</body>
</html>
