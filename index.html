<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; margin:0; background:#0b0c10; color:#eaeaea}
    .wrap{max-width:720px; margin:0 auto; padding:16px}
    .card{background:#14161c; border:1px solid #222533; border-radius:16px; padding:16px; margin:12px 0}
    h1{font-size:22px; margin:0 0 6px}
    .muted{opacity:.75; font-size:13px; line-height:1.3}
    .q{font-size:18px; line-height:1.25; margin:0 0 12px}
    .btn{width:100%; text-align:left; border:1px solid #2a2f40; background:#10121a; color:#eaeaea;
         border-radius:14px; padding:12px 12px; margin:8px 0; cursor:pointer; font-size:15px; line-height:1.25}
    .btn:hover{border-color:#3a415a}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .pill{background:#1b1f2b; border:1px solid #2a2f40; border-radius:999px; padding:6px 10px; font-size:12px; opacity:.9}
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .primary{background:#2b5cff; border-color:#2b5cff}
    .primary:hover{filter:brightness(1.05)}
    .small{font-size:13px}
    a{color:#8fb3ff}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="screen-start">
      <h1>–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?</h1>
      <div class="muted">7 –º–µ–º–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –í –∫–æ–Ω—Ü–µ ‚Äî —Ç–≤–æ–π —Ç–∏–ø –∏ –∫–Ω–æ–ø–∫–∞ ‚Äú–ø–µ—Ä–µ—Å–ª–∞—Ç—å –≤ —á–∞—Ç‚Äù.</div>
      <div style="height:12px"></div>

      <!-- ‚úÖ –§–ò–ö–°: onclick –ø—Ä—è–º–æ –≤ HTML -->
      <button class="btn primary" id="startBtn" onclick="startTest()">üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>

      <div class="muted small" id="userHint" style="margin-top:10px"></div>

      <!-- ‚úÖ –§–ò–ö–°: –≤–∏–¥–∏–º—ã–π –ª–æ–≥ –æ—à–∏–±–æ–∫/–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ -->
      <div class="muted small" id="errBox" style="margin-top:10px; white-space:pre-wrap;"></div>
    </div>

    <div class="card" id="screen-quiz" style="display:none">
      <div class="row" style="justify-content:space-between; align-items:center">
        <div class="pill" id="progressPill">–í–æ–ø—Ä–æ—Å 1/7</div>
        <div class="pill" id="timerPill" style="display:none">‚è±Ô∏è</div>
      </div>
      <div style="height:12px"></div>
      <div class="q" id="qText"></div>
      <div id="answers"></div>
    </div>

    <div class="card" id="screen-result" style="display:none">
      <h1 id="rTitle">–¢—ã ‚Äî ...</h1>
      <div class="muted" id="rSubtitle"></div>
      <div style="height:12px"></div>
      <div class="card" style="margin:0; background:#10121a" id="rBody"></div>
      <div style="height:12px"></div>
      <div class="actions">
        <button class="btn primary" id="shareBtn">üì£ –ü–µ—Ä–µ—Å–ª–∞—Ç—å –≤ —à–∫–æ–ª—å–Ω—ã–π —á–∞—Ç</button>
        <button class="btn" id="restartBtn">üîÅ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
        <button class="btn" id="ctaBtn">üéØ –£–∑–Ω–∞—Ç—å –ø—Ä–æ –ê–π–î–∞–ö–µ–º–ø</button>
      </div>
      <div class="muted small" style="margin-top:10px">
        –ü–æ–¥–µ–ª–∏—Ç—å—Å—è: –º—ã –∫–æ–ø–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –≤ –±—É—Ñ–µ—Ä + –¥–∞—ë–º —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞/—Ç–µ—Å—Ç.
      </div>
    </div>
  </div>

<script>
  // --- Telegram init (–Ω–µ –¥–æ–ª–∂–µ–Ω –ª–æ–º–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ) ---
  const tg = window.Telegram?.WebApp;
  try {
    if (tg) {
      tg.expand();
      tg.ready();
      tg.setHeaderColor?.("#0b0c10");
      tg.setBackgroundColor?.("#0b0c10");
    }
  } catch (e) {
    // –Ω–µ –≤–∞–ª–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ —Å WebApp API
  }

  // ===== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ —Ç–µ–±—è =====
  const BOT_USERNAME = "YOUR_BOT_USERNAME"; // –Ω–∞–ø—Ä–∏–º–µ—Ä: aidacamp_test_bot (–±–µ–∑ @)
  const CTA_URL = "https://example.com/aidacamp"; // –∫—É–¥–∞ –≤–µ—Å—Ç–∏ (—Å–∞–π—Ç/–ª–µ–Ω–¥–∏–Ω–≥/—á–∞—Ç)

  const APP_DEEPLINK = () => `https://t.me/${BOT_USERNAME}?startapp=schoolchat`;

  // ===== –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞: 12 —Ç–∏–ø–æ–≤ + –º–µ–º–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã =====
  const TYPES = [
    { id:"investor", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ò–Ω–≤–µ—Å—Ç–æ—Ä", meme:"¬´–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ = –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–±—ë–Ω–∫–∞¬ª",
      text:"–¢—ã –Ω–µ –ø–æ–∫—É–ø–∞–µ—à—å –∫—Ä—É–∂–æ–∫ ‚Äî —Ç—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–µ—à—å –≤ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é. –°–ø—Ä–∞—à–∏–≤–∞–µ—à—å –ø—Ä–æ –Ω–∞–≤—ã–∫–∏, —Å—Ä–µ–¥—É –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –°–∫–∏–¥–∫–∏ —Ç–µ–±—è –Ω–µ –≤–æ–∑–±—É–∂–¥–∞—é—Ç." },
    { id:"econom", name:"–†–æ–¥–∏—Ç–µ–ª—å-–≠–∫–æ–Ω–æ–º", meme:"¬´–ê –ø–æ—á–µ–º—É —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ, –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —à—Ç–æ—Ä—ã?¬ª",
      text:"–¢—ã –≤–∏–¥–∏—à—å –º–∏—Ä –≤ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö. –õ—é–±–∏—à—å ‚Äú–¥–µ—à–µ–≤–ª–µ/—Ç–∞–∫–æ–µ –∂–µ/—Å –ø—Ä–æ–º–æ‚Äù. –ü–æ–∫—É–ø–∞–µ—à—å, –∫–æ–≥–¥–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–æ–∫–∞–∑–∞–ª–∏." },
    { id:"insurer", name:"–†–æ–¥–∏—Ç–µ–ª—å-–°—Ç—Ä–∞—Ö–æ–≤–∞—Ç–µ–ª—å", meme:"¬´–ê–ø—Ç–µ—á–∫–∞ –≥–¥–µ? –ê –∞–ª–ª–µ—Ä–≥–∏—è –Ω–∞ –≤–æ–∑–¥—É—Ö?¬ª",
      text:"–¢–≤–æ–π —Å—É–ø–µ—Ä—Å–∫–∏–ª–ª ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –¢—ã –Ω–µ –¥—É—à–Ω–∏–ª–∞, —Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–∏—Å–∫–æ–≤. –¢–µ–±–µ –≤–∞–∂–Ω—ã —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å." },
    { id:"overloaded", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π", meme:"¬´–°—Å—ã–ª–∫—É. –û–ø–ª–∞—Ç–∏—Ç—å. –ì–æ—Ç–æ–≤–æ.¬ª",
      text:"–£ —Ç–µ–±—è —Å–æ–∑–≤–æ–Ω—ã –∂—Ä—É—Ç –∂–∏–∑–Ω—å. –¢—ã –ø–æ–∫—É–ø–∞–µ—à—å –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ—Ö‚Ä¶ –µ—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—Å—Ç–æ. –õ—é–±–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å ‚Äî –∏ —Ç—ã —É–ª–µ—Ç–∞–µ—à—å –≤ —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–∂–∞—Ä." },
    { id:"overheated", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ü–µ—Ä–µ–≥—Ä–µ—Ç—ã–π", meme:"¬´–Ø –ø–æ—á–∏—Ç–∞–ª(–∞) 8 —Ñ–æ—Ä—É–º–æ–≤ –∏ 3 –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è¬ª",
      text:"–¢—ã –≤–∏–¥–µ–ª(–∞) –∏–¥–µ–∞–ª—å–Ω—ã–π –ª–∞–≥–µ—Ä—å‚Ä¶ –≤ —Ç–µ–æ—Ä–∏–∏. –¢—ã –∑–∞–¥–∞—ë—à—å –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É–º–µ–µ—à—å –¥–æ–∫–æ–ø–∞—Ç—å—Å—è –¥–æ —Å—É—Ç–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –æ—Ç–≤–µ—á–∞—Ç—å —Ñ–∞–∫—Ç–∞–º–∏." },
    { id:"compensator", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ö–æ–º–ø–µ–Ω—Å–∞—Ç–æ—Ä", meme:"¬´–£ –º–µ–Ω—è –≤ –¥–µ—Ç—Å—Ç–≤–µ —ç—Ç–æ–≥–æ –Ω–µ –±—ã–ª–æ ‚Äî —É –Ω–µ–≥–æ –±—É–¥–µ—Ç!¬ª",
      text:"–¢—ã –¥–∞—ë—à—å —Ä–µ–±—ë–Ω–∫—É —Ç–æ, —á–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ —Ç–µ–±–µ. –õ–æ—è–ª–µ–Ω –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º, –≥–¥–µ –µ—Å—Ç—å —Ä–æ—Å—Ç, –Ω–∞–≤—ã–∫–∏, —Å–º—ã—Å–ª –∏ –∏—Å—Ç–æ—Ä–∏—è." },
    { id:"infantilized", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ò–Ω—Ñ–∞–Ω—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π", meme:"¬´–ê –≤—ã —Å–∞–º–∏ —Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –Ω–∞–º –ª—É—á—à–µ¬ª",
      text:"–¢—ã –Ω–µ –ø–ª–æ—Ö–æ–π ‚Äî —Ç—ã —É—Å—Ç–∞–≤—à–∏–π –æ—Ç —Ä–µ—à–µ–Ω–∏–π. –¢–µ–±–µ –∑–∞—Ö–æ–¥—è—Ç ‚Äú–≥–æ—Ç–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã‚Äù: –≤—ã–±—Ä–∞–ª–∏ –∑–∞ —Ç–µ–±—è, –æ–±—ä—è—Å–Ω–∏–ª–∏, –ø—Ä–æ–≤–µ–ª–∏." },
    { id:"socializer", name:"–†–æ–¥–∏—Ç–µ–ª—å-–°–æ—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä", meme:"¬´–ì–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã –±—ã–ª–∏ —Å–≤–æ–∏ –∏ –∫–æ–º–∞–Ω–¥–∞¬ª",
      text:"–¢—ã –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ —Ç–∞–º –¥—Ä—É–∑—å—è/–∫–æ–º—å—é–Ω–∏—Ç–∏ ‚Äî —Ç—ã —É–∂–µ –ø–æ—á—Ç–∏ –æ–ø–ª–∞—Ç–∏–ª(–∞)." },
    { id:"prestige", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ü—Ä–µ—Å—Ç–∏–∂–Ω–∏–∫", meme:"¬´–ß—Ç–æ–±—ã –Ω–µ —Å—Ç—ã–¥–Ω–æ –∏ –≤—Å–µ –ø–æ–Ω—è–ª–∏ —É—Ä–æ–≤–µ–Ω—å¬ª",
      text:"–ë—Ä–µ–Ω–¥, —Å—Ç–∞—Ç—É—Å, ‚Äú–∫—É–¥–∞ —Ö–æ–¥—è—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –ª—é–¥–∏‚Äù ‚Äî —Ç–≤–æ—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è. –¢–µ–±—è –∫–æ–Ω–≤–µ—Ä—Ç—è—Ç –Ω–∞–≥—Ä–∞–¥—ã, –ø–∞—Ä—Ç–Ω—ë—Ä—ã, –ø—É–±–ª–∏—á–Ω–æ—Å—Ç—å." },
    { id:"leave_me", name:"–†–æ–¥–∏—Ç–µ–ª—å ¬´–û—Ç—Å—Ç–∞–Ω—å—Ç–µ-–æ—Ç-–º–µ–Ω—è¬ª", meme:"¬´–Ø –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É —Ç–∏—à–∏–Ω—ã¬ª",
      text:"–¢—ã —á–µ—Å—Ç–µ–Ω(–Ω–∞): –Ω—É–∂–µ–Ω –æ—Ç–¥—ã—Ö –≤—Å–µ–º. –¢—ã –ø—Ä–∏—Ö–æ–¥–∏—à—å –ø–æ–∑–¥–Ω–æ, –∫–æ–≥–¥–∞ –º–µ—Å—Ç —É–∂–µ –Ω–µ—Ç. –ù–æ –µ—Å–ª–∏ —É—Å–ø–µ–ª(–∞) ‚Äî —ç—Ç–æ –±—É–¥–µ—Ç –ª—É—á—à–∏–π –æ—Ç–ø—É—Å–∫ –≥–æ–¥–∞." },
    { id:"planner", name:"–†–æ–¥–∏—Ç–µ–ª—å-–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫", meme:"¬´–õ–∞–≥–µ—Ä—å ‚Äî —Å—Ç—Ä–æ–∫–∞ –≤ Excel¬ª",
      text:"–£ —Ç–µ–±—è –ø–ª–∞–Ω –Ω–∞ –≥–æ–¥—ã: –∫—Ä—É–∂–∫–∏, –ª–∞–≥–µ—Ä—è, –ø—Ä–æ–µ–∫—Ç—ã. –¢—ã –ª—é–±–∏—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ç–∞–π–º–∏–Ω–≥ –∏ –ø–æ–Ω—è—Ç–Ω—É—é –ø–æ–ª—å–∑—É." },
    { id:"skeptic", name:"–†–æ–¥–∏—Ç–µ–ª—å-–°–∫–µ–ø—Ç–∏–∫", meme:"¬´–§–æ—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∏–µ? –î–æ–∫—É–º–µ–Ω—Ç—ã –≥–¥–µ?¬ª",
      text:"–¢—ã –Ω–∏–∫–æ–º—É –Ω–µ –≤–µ—Ä–∏—à—å –Ω–∞ —Å–ª–æ–≤–æ ‚Äî –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –¢–µ–±–µ –Ω—É–∂–Ω—ã –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞: –¥–æ–≥–æ–≤–æ—Ä, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å." },
  ];

  // ===== –í–æ–ø—Ä–æ—Å—ã + –æ—á–∫–∏ –ø–æ —Ç–∏–ø–∞–º =====
  const QUESTIONS = [
    {
      q: "–í —á–∞—Ç –ø—Ä–∏–ª–µ—Ç–∞–µ—Ç: ¬´–°–∫–∏–¥—ã–≤–∞–µ–º—Å—è –Ω–∞ —à—Ç–æ—Ä—ã. 1500 –¥–æ 18:00¬ª",
      a: [
        { t:"(–ü—Ä–∏–∑—Ä–∞–∫) –º–æ–ª—á–∞ –ø—Ä–æ—á–∏—Ç–∞–ª(–∞) ‚Üí –º–æ–ª—á–∞ –∏—Å—á–µ–∑(–ª–∞)", s:{ leave_me:2 } },
        { t:"(–¢–µ—Ä–º–∏–Ω–∞–ª) ¬´–û–∫¬ª + –ø–µ—Ä–µ–≤—ë–ª(–∞) –∑–∞ 7 —Å–µ–∫—É–Ω–¥", s:{ overloaded:2 } },
        { t:"(–°–º–µ—Ç–Ω—ã–π –∫–æ–º–∏—Å—Å–∞—Ä) ¬´–ê –ø–æ—á–µ–º—É 1500? –ì–¥–µ –ö–ü? –ì–¥–µ 3 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã?¬ª", s:{ econom:2, skeptic:1 } },
        { t:"(–®—Ç–æ—Ä–Ω—ã–π —Å–æ–º–µ–ª—å–µ) ¬´–Ø –Ω–∞–π–¥—É –ª—É—á—à–µ: –±–ª—ç–∫–∞—É—Ç, 4.9‚≠ê, –¥–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤—Ç—Ä–∞¬ª", s:{ planner:2, investor:1 } },
        { t:"(–¢—Ä–µ–≤–æ–∂–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å) ¬´–ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –Ω–µ –ø—ã–ª—å –∏ –±–µ–∑ –∞–ª–ª–µ—Ä–≥–∏–∏¬ª", s:{ insurer:2 } },
        { t:"(–°—Ç–∞—Ç—É—Å-—Ä–µ–∂–∏–º) ¬´–ë–µ—Ä—ë–º –±—Ä–µ–Ω–¥–æ–≤—ã–µ. –ü—É—Å—Ç—å –∫–ª–∞—Å—Å –≤—ã–≥–ª—è–¥–∏—Ç –î–û–†–û–ì–û¬ª", s:{ prestige:2 } },
      ]
    },
    {
      q: "–†–æ–¥–∫–æ–º: ¬´–ù–∞–¥–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫ —É—á–∏—Ç–µ–ª—é¬ª",
      a: [
        { t:"¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –õ—é–±–æ–π. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –æ–±—Å—É–∂–¥–∞—Ç—å 3 –¥–Ω—è¬ª", s:{ overloaded:1, leave_me:1 } },
        { t:"¬´–ú–∏–Ω–∏–º–∞–ª–∫–∞. –£—á–∏—Ç–µ–ª—å ‚Äî –º–æ–ª–æ–¥–µ—Ü, –Ω–æ –∏–ø–æ—Ç–µ–∫–∞ —Ç–æ–∂–µ –º–æ–ª–æ–¥–µ—Ü¬ª", s:{ econom:2 } },
        { t:"¬´–°–¥–µ–ª–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ –∏ —Å—Ç–∞—Ç—É—Å–Ω–æ, —á—Ç–æ–±—ã –±—ã–ª–æ –Ω–µ —Å—Ç—ã–¥–Ω–æ¬ª", s:{ prestige:2 } },
        { t:"¬´–°–Ω–∞—á–∞–ª–∞ –±—é–¥–∂–µ—Ç/–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ/—Ç–∞–±–ª–∏—á–∫–∞/–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π ‚Äî —è —Å–¥–µ–ª–∞—é¬ª", s:{ planner:2 } },
        { t:"¬´–ê —ç—Ç–æ —Ç–æ—á–Ω–æ –æ–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏? –ê —Ç–æ –ø–æ—Ç–æ–º —Å–∫–∞–Ω–¥–∞–ª¬ª", s:{ skeptic:2 } },
        { t:"¬´–Ø –≤—Å–µ—Ö –ø—Ä–∏–º–∏—Ä—é –∏ —Å–æ–±–µ—Ä—É –º–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –≤—Å–µ–º –±—ã–ª–æ –æ–∫¬ª", s:{ socializer:2 } },
      ]
    },
    {
      q: "–£—á–∏—Ç–µ–ª—å: ¬´–í–∞—à —Ä–µ–±—ë–Ω–æ–∫ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ¬ª",
      a: [
        { t:"¬´–ó–∞–±–∏—Ä–∞–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω. –ò –ª—É—á—à–µ –µ—â—ë –∑–∞—Ä—è–¥–∫—É¬ª", s:{ insurer:2 } },
        { t:"¬´–£—Ç–æ—á–Ω–∏—Ç–µ: –∫–æ–≥–¥–∞, —Å–∫–æ–ª—å–∫–æ, –Ω–∞ –∫–∞–∫–∏—Ö —É—Ä–æ–∫–∞—Ö, –¥–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü?¬ª", s:{ planner:2, skeptic:1 } },
        { t:"¬´–°–µ–π—á–∞—Å –∏—Å–ø—Ä–∞–≤–ª—é: –∫—É—Ä—Å/–ª–∞–≥–µ—Ä—å/—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä ‚Äî —É –º–µ–Ω—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –≤–∫–ª—é—á–∏–ª–∞—Å—å¬ª", s:{ compensator:2 } },
        { t:"¬´–û–π, —è –Ω–∞ —Å–æ–∑–≤–æ–Ω–µ. –ú–æ–∂–Ω–æ –ø–æ–∑–∂–µ?¬ª (–Ω–µ–ª—å–∑—è)", s:{ overloaded:2 } },
        { t:"¬´–ê —É –≤–∞—Å –º–µ—Ç–æ–¥–∏–∫–∞/–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è? ‚Äú–û—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è‚Äù ‚Äî —ç—Ç–æ –Ω–µ KPI¬ª", s:{ overheated:2 } },
      ]
    },
    {
      q: "–í —á–∞—Ç –∫–∏–¥–∞—é—Ç: ¬´–õ–µ—Ç–Ω–∏–π IT-–ª–∞–≥–µ—Ä—å. –°–∫–∏–¥–∫–∞ –¥–æ –∑–∞–≤—Ç—Ä–∞¬ª",
      a: [
        { t:"¬´–°–∫–∏–¥–∫–∞?? –°—Ä–∞–≤–Ω—é 12 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –Ω–∞–π–¥—É –¥–µ—à–µ–≤–ª–µ –∏ –≤—ã–±—å—é –ø—Ä–æ–º–æ–∫–æ–¥¬ª", s:{ econom:2 } },
        { t:"¬´–ö–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ –≤—ã—Ö–æ–¥–µ? —Å—Ä–µ–¥–∞? —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è?¬ª", s:{ investor:2 } },
        { t:"¬´–ú–Ω–µ –Ω–∞–¥–æ: —Å—Å—ã–ª–∫–∞ ‚Üí –≤—ã–±—Ä–∞—Ç—å ‚Üí –æ–ø–ª–∞—Ç–∏—Ç—å ‚Üí –Ω–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –º–µ–Ω—è¬ª", s:{ overloaded:2 } },
        { t:"¬´–ì–¥–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–¥–æ–≥–æ–≤–æ—Ä/—Ä–µ–µ—Å—Ç—Ä/—Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã/—Ñ–æ—Ç–æ –Ω–µ –±–æ—Ç—ã?¬ª", s:{ skeptic:2 } },
        { t:"¬´–ö—É–¥–∞ –∏–¥—É—Ç –¥—Ä—É–∑—å—è? –ú–Ω–µ –≤–∞–∂–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ¬ª", s:{ socializer:2 } },
        { t:"¬´–Ø –ø–æ—á–∏—Ç–∞—é —Ñ–æ—Ä—É–º—ã –∏ –∑–∞–¥–∞–º 47 –≤–æ–ø—Ä–æ—Å–æ–≤¬ª", s:{ overheated:2 } },
      ]
    },
    {
      q: "–í —á–∞—Ç –∑–∞—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ 40 —Å—Ç—Ä–æ–∫: ¬´–í–ê–ñ–ù–û!!!¬ª",
      a: [
        { t:"¬´–Ø –ø—Ä–æ—á–∏—Ç–∞–ª(–∞) –ø–µ—Ä–≤—ã–µ 2 —Å—Ç—Ä–æ–∫–∏. –î–∞–ª—å—à–µ ‚Äî —Ç—É–º–∞–Ω¬ª", s:{ leave_me:2 } },
        { t:"¬´–ö–æ—Ä–æ—Ç–∫–æ: —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∏ –¥–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏?¬ª", s:{ overloaded:2 } },
        { t:"¬´–°–µ–π—á–∞—Å –≤—Å–µ—Ö –ø—Ä–∏–º–∏—Ä—é, —Ä–∞–∑—Ä—É–ª—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –ø—Ä–µ–¥–ª–æ–∂—É –∫–æ–º–ø—Ä–æ–º–∏—Å—Å¬ª", s:{ socializer:2 } },
        { t:"¬´–ü–µ—Ä–µ—à–ª—é –º—É–∂—É/–∂–µ–Ω–µ: —Ä–∞–∑–±–µ—Ä–∏—Å—å, —è –Ω–µ –º–æ–≥—É¬ª", s:{ infantilized:2 } },
        { t:"¬´–Ø –Ω–∞—à—ë–ª(–ª–∞) –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –≤ 17-–π —Å—Ç—Ä–æ–∫–µ. –°–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—é¬ª", s:{ skeptic:1, overheated:1 } },
      ]
    },
    {
      q: "–†–æ–¥–∫–æ–º: ¬´–ù—É–∂–Ω—ã –≤–æ–ª–æ–Ω—Ç—ë—Ä—ã –Ω–∞ —ç–∫—Å–∫—É—Ä—Å–∏—é¬ª",
      a: [
        { t:"¬´–Ø –Ω–µ –º–æ–≥—É. –Ø –≤—Å–µ–≥–¥–∞ –Ω–µ –º–æ–≥—É. –Ø –¥–∞–∂–µ —Å–µ–π—á–∞—Å –Ω–µ –º–æ–≥—É¬ª", s:{ leave_me:2 } },
        { t:"¬´–ú–æ–≥—É, –Ω–æ –Ω—É–∂–µ–Ω —Ç–∞–π–º–∏–Ω–≥, —Ä–æ–ª–∏ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å¬ª", s:{ planner:2 } },
        { t:"¬´–ú–æ–≥—É, –µ—Å–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Å–ø–∏—Å–æ–∫ –¥–µ—Ç–µ–π, –∞–ø—Ç–µ—á–∫–∞, –∫–æ–Ω—Ç–∞–∫—Ç—ã¬ª", s:{ insurer:2 } },
        { t:"¬´–ú–æ–≥—É ‚Äî —Ä–µ–±—ë–Ω–∫—É –≤–∞–∂–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∏ –¥—Ä—É–∑—å—è¬ª", s:{ socializer:2 } },
        { t:"¬´–ú–æ–≥—É, –Ω–æ –ø–æ—á–µ–º—É —ç—Ç–æ –ø–ª–∞—Ç–Ω–æ? –≥–¥–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç?¬ª", s:{ econom:2 } },
        { t:"¬´–ú–æ–≥—É, –Ω–æ –¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤–æ: —Ñ–æ—Ç–æ/—Ä–µ–ø–æ—Ä—Ç–∞–∂/—É—Ä–æ–≤–µ–Ω—å¬ª", s:{ prestige:2 } },
      ]
    },
    {
      q: "–¢–≤–æ–π ¬´—Ä–µ–∂–∏–º¬ª –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ ‚Äî —ç—Ç–æ‚Ä¶",
      a: [
        { t:"–ü—Ä–æ—á–∏—Ç–∞–Ω–æ ‚úÖ (–∏ –≤—Å—ë)", s:{ leave_me:2 } },
        { t:"¬´–î–æ–±—Ä—ã–π –¥–µ–Ω—å. –£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞‚Ä¶¬ª", s:{ skeptic:1, planner:1 } },
        { t:"¬´–°—Å—ã–ª–∫—É. –û–ø–ª–∞—Ç–∏—Ç—å. –ì–æ—Ç–æ–≤–æ.¬ª", s:{ overloaded:2 } },
        { t:"¬´–Ø –ø–æ—á–∏—Ç–∞–ª(–∞) 8 —Ñ–æ—Ä—É–º–æ–≤ –∏ 3 –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è¬ª", s:{ overheated:2 } },
        { t:"¬´–£ –º–µ–Ω—è –ø–ª–∞–Ω –Ω–∞ 3 –≥–æ–¥–∞, —è —Å–µ–π—á–∞—Å —Ä–∞–∑–ª–æ–∂—É¬ª", s:{ planner:2 } },
        { t:"¬´–ì–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç/—Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è/–Ω–∞–≤—ã–∫–∏/—Å—Ä–µ–¥–∞?¬ª", s:{ investor:2 } },
      ]
    },
  ];

  // ===== DOM refs =====
  const screens = {
    start: document.getElementById("screen-start"),
    quiz: document.getElementById("screen-quiz"),
    result: document.getElementById("screen-result"),
  };

  const qText = document.getElementById("qText");
  const answersEl = document.getElementById("answers");
  const progressPill = document.getElementById("progressPill");
  const userHint = document.getElementById("userHint");

  const rTitle = document.getElementById("rTitle");
  const rSubtitle = document.getElementById("rSubtitle");
  const rBody = document.getElementById("rBody");
  const shareBtn = document.getElementById("shareBtn");
  const restartBtn = document.getElementById("restartBtn");
  const ctaBtn = document.getElementById("ctaBtn");

  // ‚úÖ –§–ò–ö–°: –ª–æ–≥/–æ—à–∏–±–∫–∏ –≤–∏–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  const errBox = document.getElementById("errBox");
  function logErr(msg){
    if (!errBox) return;
    errBox.textContent += (errBox.textContent ? "\n" : "") + msg;
  }
  window.onerror = (msg) => logErr("JS error: " + msg);
  window.onunhandledrejection = (e) => logErr("Promise error: " + (e.reason?.message || e.reason || "unknown"));

  // ===== State =====
  let idx = 0;
  let score = {}; // typeId -> points

  function getUserLabel() {
    try {
      const u = tg?.initDataUnsafe?.user;
      if (!u) return "";
      const name = [u.first_name, u.last_name].filter(Boolean).join(" ");
      const uname = u.username ? `@${u.username}` : "";
      return `–¢—ã –≤ Telegram –∫–∞–∫: ${name} ${uname}`.trim();
    } catch { return ""; }
  }

  function show(screen) {
    Object.values(screens).forEach(s => s.style.display = "none");
    screens[screen].style.display = "block";
  }

  function addScore(map) {
    for (const [k,v] of Object.entries(map)) score[k] = (score[k]||0) + v;
  }

  function renderQuestion() {
    const q = QUESTIONS[idx];
    progressPill.textContent = `–í–æ–ø—Ä–æ—Å ${idx+1}/${QUESTIONS.length}`;
    qText.textContent = q.q;
    answersEl.innerHTML = "";
    q.a.forEach((opt) => {
      const b = document.createElement("button");
      b.className = "btn";
      b.textContent = opt.t;
      b.onclick = () => {
        addScore(opt.s);
        idx++;
        if (idx < QUESTIONS.length) renderQuestion();
        else renderResult();
      };
      answersEl.appendChild(b);
    });
  }

  function top2Types() {
    const entries = TYPES.map(t => [t.id, score[t.id] || 0]);
    entries.sort((a,b)=>b[1]-a[1]);
    const [t1, t2] = entries;
    return { t1, t2 };
  }

  function renderResult() {
    const { t1, t2 } = top2Types();
    const best = TYPES.find(x=>x.id===t1[0]) || TYPES[0];
    const second = TYPES.find(x=>x.id===t2[0]) || null;

    rTitle.textContent = `–¢—ã ‚Äî ${best.name}`;
    const delta = (t1[1] - (t2?.[1] ?? 0));
    rSubtitle.textContent = delta <= 1 && second
      ? `–ù–∞ –≥—Ä–∞–Ω–∏ —Å —Ç–∏–ø–æ–º: ${second.name}. ${best.meme}`
      : best.meme;

    rBody.innerHTML = `
      <div style="font-size:15px; line-height:1.45">${best.text}</div>
      <div style="height:10px"></div>
      <div class="muted small">
        üéØ –•–æ—á–µ—à—å ‚Äú–≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ‚Äù –ø–æ–¥ —Ç–≤–æ—é –ª–æ–≥–∏–∫—É? –ñ–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.
      </div>
    `;

    show("result");

    // Telegram MainButton (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
    try {
      if (tg?.MainButton) {
        tg.MainButton.setText("üì£ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º");
        tg.MainButton.show();
        tg.MainButton.onClick(() => doShare(best, second, delta));
      }
    } catch (e) {
      // –Ω–µ –≤–∞–ª–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    }
  }

  async function doShare(best, second, delta) {
    const add = (delta <= 1 && second) ? ` (–∏ —á—É—Ç—å-—á—É—Ç—å ${second.name})` : "";
    const text =
`–Ø –ø—Ä–æ—à—ë–ª(–ª–∞) —Ç–µ—Å—Ç ¬´–ö–∞–∫–æ–π —Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å –≤ —à–∫–æ–ª—å–Ω–æ–º —á–∞—Ç–µ?¬ª üòà
–†–µ–∑—É–ª—å—Ç–∞—Ç: ${best.name}${add}
${best.meme}

–ü—Ä–æ–π–¥–∏ —Ç–æ–∂–µ: ${APP_DEEPLINK()}`;

    try {
      await navigator.clipboard.writeText(text);
      tg?.showPopup?.({ title:"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ", message:"–¢–µ–∫—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±—É—Ñ–µ—Ä–µ. –í—Å—Ç–∞–≤—å –≤ —à–∫–æ–ª—å–Ω—ã–π —á–∞—Ç üòÑ", buttons:[{type:"ok"}] });
    } catch {
      tg?.showPopup?.({ title:"–ù–µ –≤—ã—à–ª–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å", message:"–°–∫–æ–ø–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ —á–∞—Ç.", buttons:[{type:"ok"}] });
    }
  }

  // ‚úÖ –§–ò–ö–°: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ ‚Äî —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é (onclick –≤ HTML)
  window.startTest = function startTest() {
    logErr("–ö–ª–∏–∫ –ø–æ–π–º–∞–Ω ‚úÖ –∑–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç‚Ä¶");
    try {
      score = {};
      idx = 0;
      show("quiz");
      renderQuestion();
    } catch (e) {
      logErr("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ: " + (e?.message || e));
    }
  };

  // ===== Buttons =====
  shareBtn.onclick = () => {
    const { t1, t2 } = top2Types();
    const best = TYPES.find(x=>x.id===t1[0]) || TYPES[0];
    const second = TYPES.find(x=>x.id===t2[0]) || null;
    const delta = (t1[1] - (t2?.[1] ?? 0));
    doShare(best, second, delta);
  };

  restartBtn.onclick = () => { show("start"); };

  ctaBtn.onclick = () => {
    try {
      if (tg?.openLink) tg.openLink(CTA_URL);
      else window.location.href = CTA_URL;
    } catch {
      window.location.href = CTA_URL;
    }
  };

  // init label
  userHint.textContent = getUserLabel();
</script>
</body>
</html>
